<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Manager v13 Pro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container">
    
    <aside class="sidebar">
        <div class="brand">
            <i class="fas fa-layer-group"></i> TeacherOS
        </div>
        
        <div class="profile-widget" onclick="openConfigModal()">
            <div class="avatar">Pro</div>
            <div class="info">
                <h4 id="sidebarName">Docente</h4>
                <small>ConfiguraciÃ³n & Nube</small>
            </div>
        </div>
        
        <nav class="nav-menu">
            <button onclick="nav('dashboard')" id="nav-dashboard" class="active"><i class="fas fa-chart-pie"></i> Dashboard</button>
            <button onclick="nav('notebook')" id="nav-notebook" class="highlight-btn"><i class="fas fa-book-open"></i> Notebook (Admin)</button>
            <div class="nav-divider">MIS CLASES</div>
            <div id="sidebar-classes-list"></div>
            <button onclick="openCreateClassModal()" class="add-class-btn"><i class="fas fa-plus"></i> Nueva Clase</button>
        </nav>
        
        <div class="sidebar-footer">
            <small id="syncStatus">â˜ï¸ Offline</small>
        </div>
    </aside>

    <main class="main-content">
        
        <section id="view-dashboard" class="view active">
            <header>
                <h1>Resumen Semanal</h1>
                <p>Tu cronograma y alertas</p>
            </header>
            
            <div class="dashboard-grid">
                <div class="card full-width">
                    <div class="card-header">
                        <h3>ğŸ“… Horario Semanal</h3>
                        <button onclick="openScheduleModal()" class="btn-text">Editar</button>
                    </div>
                    <div class="schedule-grid" id="dashboardSchedule">
                        </div>
                </div>

                <div class="card">
                    <h3>ğŸ“¢ Ãšltimas BitÃ¡coras</h3>
                    <div id="dash-logs" class="list-scroll"></div>
                </div>

                <div class="card">
                    <h3>ğŸ“Œ PrÃ³ximas Tareas</h3>
                    <div id="dash-planner" class="list-scroll"></div>
                </div>
            </div>
        </section>

        <section id="view-notebook" class="view">
            <header>
                <h1>Notebook Global</h1>
                <p>Centro de mando: Estudiantes, Notas y PlanificaciÃ³n</p>
            </header>

            <div class="tabs">
                <button class="tab-btn active" onclick="setNbTab('nb-students')">ğŸ‘¥ Estudiantes</button>
                <button class="tab-btn" onclick="setNbTab('nb-gradebook')">ğŸ“ Gradebook (Notas)</button>
                <button class="tab-btn" onclick="setNbTab('nb-planning')">ğŸ“… Planning</button>
                <button class="tab-btn" onclick="setNbTab('nb-logbook')">ğŸ“– BitÃ¡cora Maestra</button>
            </div>

            <div id="nb-students" class="nb-tab-content active">
                <div class="toolbar">
                    <select id="nbStudentClassSelect" onchange="renderNbStudents()">
                        <option value="">Todas las clases</option>
                    </select>
                    <button onclick="openAddStudentModal()" class="btn-primary">+ Alumno</button>
                </div>
                <div id="nbStudentList" class="table-container"></div>
            </div>

            <div id="nb-gradebook" class="nb-tab-content">
                <div class="toolbar">
                    <select id="nbGradebookClassSelect" onchange="renderNbGradebook()"></select>
                    <button onclick="openAddAssignmentModal()" class="btn-primary">+ Columna (Actividad)</button>
                </div>
                <div class="gradebook-wrapper" id="nbGradebookTable">
                    </div>
            </div>

            <div id="nb-planning" class="nb-tab-content">
                <div class="toolbar">
                    <button onclick="openAddPlanModal()" class="btn-primary">+ PlanificaciÃ³n</button>
                </div>
                <div id="nbPlanningList" class="cards-grid"></div>
            </div>

            <div id="nb-logbook" class="nb-tab-content">
                <div class="toolbar">
                    <button onclick="openLogbookModal()" class="btn-primary">+ Nueva Entrada</button>
                </div>
                <div id="nbLogbookList" class="timeline"></div>
            </div>
        </section>

        <section id="view-class" class="view">
            <header class="class-header">
                <div>
                    <h1 id="clsTitle">Clase</h1>
                    <small id="clsSubtitle">Vista de Clase</small>
                </div>
                <div class="header-actions">
                    <button onclick="toggleAttendance()" class="btn-secondary">ğŸ™‹â€â™‚ï¸ Pasar Asistencia</button>
                </div>
            </header>

            <div class="class-dashboard-grid">
                <div id="attendanceWidget" class="card full-width" style="display:none; background:#f0f9ff; border-color:#bae6fd;">
                    <h3>Asistencia de Hoy</h3>
                    <div id="attendanceList" class="attendance-grid"></div>
                    <button onclick="saveAttendance()" class="btn-primary small" style="margin-top:10px;">Guardar</button>
                </div>

                <div class="card">
                    <h3>ğŸ“Š Calificaciones (Vista)</h3>
                    <div id="clsGradebookView" class="simple-table-container"></div>
                </div>

                <div class="card">
                    <h3>ğŸ“– BitÃ¡cora de Clase</h3>
                    <div id="clsLogbookView" class="timeline"></div>
                </div>
            </div>
        </section>

    </main>
</div>

<div id="modalConfig" class="modal">
    <div class="modal-box">
        <h3>ConfiguraciÃ³n</h3>
        <label>Nombre del Docente</label>
        <input type="text" id="cfgName">
        
        <hr>
        <label>SincronizaciÃ³n en Nube (Pantry)</label>
        <div class="row-btns">
            <button onclick="cloudSync('pull')" class="btn-secondary">ğŸ“¥ Descargar Datos</button>
            <button onclick="cloudSync('push')" class="btn-primary">ğŸ“¤ Subir Datos</button>
        </div>
        <small class="hint">AsegÃºrate de configurar el PANTRY_ID en el script.</small>
        
        <hr>
        <button onclick="saveConfig()" class="btn-primary full">Guardar</button>
        <button onclick="closeModal('modalConfig')" class="btn-flat full">Cerrar</button>
    </div>
</div>

<div id="modalGeneric" class="modal">
    <div class="modal-box">
        <h3 id="modalTitle">TÃ­tulo</h3>
        <div id="modalBody"></div>
        <div class="modal-footer">
            <button id="modalActionBtn" class="btn-primary">Guardar</button>
            <button onclick="closeModal('modalGeneric')" class="btn-flat">Cancelar</button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>